<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Avalia√ß√£o - Squad Premium</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700;800&display=swap');
        * { font-family: 'Poppins', sans-serif; }
        
        :root {
            --cor-principal: #D97B3A;
            --cor-escura: #8B5A3C;
        }
        
        .card-tool {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        
        .card-tool:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 40px rgba(217, 123, 58, 0.3);
        }
        
        .dica-box {
            background: linear-gradient(135deg, #FEF3C7, #FDE68A);
            border-left: 4px solid #F59E0B;
            padding: 16px;
            border-radius: 8px;
            margin: 12px 0;
        }
        
        .exemplo-box {
            background: linear-gradient(135deg, #DBEAFE, #BFDBFE);
            border-left: 4px solid #3B82F6;
            padding: 16px;
            border-radius: 8px;
            margin: 12px 0;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.8);
            z-index: 1000;
            overflow-y: auto;
        }
        
        .modal-content {
            background: white;
            border-radius: 16px;
            max-width: 900px;
            margin: 20px auto;
            max-height: 90vh;
            overflow-y: auto;
        }
        
        .badge-help {
            display: inline-flex;
            align-items: center;
            justify-center;
            width: 28px;
            height: 28px;
            background: #3B82F6;
            color: white;
            border-radius: 50%;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .badge-help:hover {
            transform: scale(1.2) rotate(15deg);
            background: #2563EB;
        }
    </style>
</head>
<body class="bg-gray-50">
    <div id="app"></div>
    
    <div id="modalGuia" class="modal">
        <div class="modal-content" id="modalContent"></div>
    </div>

    <script>
        // ============= SISTEMA PRINCIPAL =============
        
        class SistemaAvaliacao {
      constructor() {
  try {
    this.pagina = 'home';
    this.metaMensal = 450000;
    this.colaboradores = [];
    this.editando = null;
                
    this.guias = this.carregarGuias();
    this.carregar();
    this.render();
  } catch (e) {
    console.error("ERRO NO CONSTRUCTOR:", e);
  }
}


            // ============= GUIAS EDUCATIVOS =============
       carregarGuias() {
    return {
        kpis: {
            titulo: "üìä KPIs - Como Medir Desempenho",
            conteudo: `
                <h3 class="text-2xl font-bold mb-4">1. ENTREGAS (%)</h3>
                <div class="dica-box">
                    <strong>üí° F√≥rmula:</strong> (Tarefas Conclu√≠das / Tarefas Previstas) √ó 100
                    <br><strong>Exemplo:</strong> 8 de 10 tarefas = 80%
                </div>
                <div class="exemplo-box">
                    <strong>Como Coletar:</strong>
                    <ul class="ml-4 mt-2 space-y-1">
                        <li>‚Ä¢ Use Trello/Notion/Google Tasks</li>
                        <li>‚Ä¢ Conte tarefas "Done" vs "To Do"</li>
                        <li>‚Ä¢ Fa√ßa isso toda sexta-feira</li>
                    </ul>
                </div>

                <h3 class="text-2xl font-bold mb-4 mt-6">2. PRODUTIVIDADE (%)</h3>
                <div class="dica-box">
                    <strong>üí° F√≥rmula:</strong> (Resultado Real / Meta Planejada) √ó 100
                    <br><strong>Exemplo:</strong> Meta 100k, fez 85k = 85%
                </div>

                <h3 class="text-2xl font-bold mb-4 mt-6">3. ERROS (%)</h3>
                <div class="dica-box">
                    <strong>üí° F√≥rmula:</strong> (Ocorr√™ncias / Total de Processos) √ó 100
                    <br><strong>Objetivo:</strong> Quanto menor, melhor!
                </div>
            `
        },

        smart: {
            titulo: "üéØ Metas SMART",
            conteudo: `
                <div class="dica-box"><strong>S</strong> - Espec√≠fica: Seja claro no que ser√° feito</div>
                <div class="dica-box"><strong>M</strong> - Mensur√°vel: Tenha n√∫mero</div>
                <div class="dica-box"><strong>A</strong> - Ating√≠vel: Realista</div>
                <div class="dica-box"><strong>R</strong> - Relevante: Importante para o time</div>
                <div class="dica-box"><strong>T</strong> - Temporal: Com prazo</div>

                <div class="exemplo-box">
                    <strong>Exemplo:</strong><br>
                    Vender R$ 100.000 em software at√© 28/02 com 20 reuni√µes semanais.
                </div>
            `
        },

        cha: {
            titulo: "üß† CHA - Conhecimento, Habilidade, Atitude",
            conteudo: `
                <div class="dica-box"><strong>Conhecimento:</strong> Sabe o que fazer?</div>
                <div class="dica-box"><strong>Habilidade:</strong> Consegue fazer?</div>
                <div class="dica-box"><strong>Atitude:</strong> Quer fazer?</div>

                <div class="exemplo-box">
                    Pessoa com atitude alta aprende r√°pido mesmo com pouco conhecimento.
                </div>
            `
        },

        competencias: {
            titulo: "‚≠ê Compet√™ncias",
            conteudo: `
                <ul class="list-disc ml-6 space-y-2">
                    <li>Responsabilidade</li>
                    <li>Comunica√ß√£o</li>
                    <li>Organiza√ß√£o</li>
                    <li>Proatividade</li>
                    <li>Trabalho em equipe</li>
                    <li>Lideran√ßa</li>
                </ul>

                <div class="dica-box">
                    Avalie de 1 a 5 com base em comportamentos reais.
                </div>
            `
        },

        feedback: {
            titulo: "üí¨ Feedback Estruturado",
            conteudo: `
                <ol class="list-decimal ml-6 space-y-2">
                    <li>O que est√° funcionando</li>
                    <li>O que pode melhorar</li>
                    <li>Impacto disso</li>
                    <li>Ajuste esperado</li>
                </ol>

                <div class="exemplo-box">
                    Exemplo: Quando voc√™ atrasa relat√≥rios, o time perde prazo. Preciso que entregue at√© 17h.
                </div>
            `
        },

        avaliacao360: {
            titulo: "üîÑ Avalia√ß√£o 360¬∞",
            conteudo: `
                <p>Autoavalia√ß√£o + L√≠der + Pares + Subordinados</p>

                <div class="dica-box">
                    Use m√©dia para ter vis√£o justa do colaborador.
                </div>
            `
        },

        matriz: {
            titulo: "üìä Matriz: Desempenho x Comportamento",
            conteudo: `
                <p>Cruza ENTREGA com CULTURA para decis√µes.</p>
                <ul class="list-disc ml-6 space-y-2">
                    <li>Desenvolver</li>
                    <li>Alerta</li>
                    <li>Treinar</li>
                    <li>Desligar</li>
                </ul>
            `
        },

        pdi: {
            titulo: "üìà PDI - Plano de Desenvolvimento Individual",
            conteudo: `
                <p>Defina a√ß√µes pr√°ticas para evolu√ß√£o do colaborador.</p>

                <div class="dica-box">
                    Sempre tenha prazo e respons√°vel.
                </div>
            `
        }
    };
}

            abrirGuia(ferramenta) {
                const guia = this.guias[ferramenta];
                if (!guia) return;

                const modal = document.getElementById('modalGuia');
                const content = document.getElementById('modalContent');
                
                content.innerHTML = `
                    <div class="p-8">
                        <div class="flex justify-between items-center mb-6">
                            <h2 class="text-3xl font-bold" style="color: var(--cor-principal)">\${guia.titulo}</h2>
                            <button onclick="document.getElementById('modalGuia').style.display='none'" 
                                    class="text-4xl text-gray-400 hover:text-gray-600">&times;</button>
                        </div>
                        \${guia.conteudo}
                    </div>
               `;
                
                modal.style.display = 'block';
            }

            // ============= GEST√ÉO DE COLABORADORES =============
            
            adicionar() {
                const nome = prompt('Nome do Colaborador:');
                if (!nome) return;

                this.colaboradores.push({
                    id: Date.now(),
                    nome,
                    cargo: 'Consultor',
                    kpis: { entregas: 0, produtividade: 0, erros: 0 },
                    metas: { especifica: '', mensuravel: 0, atingivel: '', relevante: '', temporal: '' },
                    cha: { conhecimento: 3, habilidade: 3, atitude: 3 },
                    competencias: { responsabilidade: 3, comunicacao: 3, organizacao: 3, proatividade: 3, trabalhoEquipe: 3, lideranca: 3 },
                    feedback: { funcionando: '', melhorar: '', impacto: '', ajuste: '' },
                    avaliacao360: { autoavaliacao: 3, lider: 3, pares: 3, subordinados: 3 },
                    pdi: { pontoForte: '', pontoMelhoria: '', acaoPratica: '', prazo: '', responsavel: '' }
                });

                this.salvar();
                this.render();
            }

            editar(id) {
                this.editando = this.colaboradores.find(c => c.id === id);
                this.pagina = 'editar';
                this.render();
            }

            excluir(id) {
                if (confirm('Excluir este colaborador?')) {
                    this.colaboradores = this.colaboradores.filter(c => c.id !== id);
                    this.salvar();
                    this.render();
                }
            }

            salvarEdicao() {
                const idx = this.colaboradores.findIndex(c => c.id === this.editando.id);
                if (idx !== -1) this.colaboradores[idx] = this.editando;
                this.salvar();
                this.editando = null;
                this.pagina = 'colaboradores';
                this.render();
            }

            // ============= C√ÅLCULOS =============

            mediaGeral(c) {
                const kpis = (c.kpis.entregas + c.kpis.produtividade) / 2;
                const cha = (c.cha.conhecimento + c.cha.habilidade + c.cha.atitude) / 3;
                const comp = Object.values(c.competencias).reduce((a,b) => a+b, 0) / 6;
                const av360 = Object.values(c.avaliacao360).reduce((a,b) => a+b, 0) / 4;
                return ((kpis + cha + comp + av360) / 4).toFixed(1);
            }

            classificar(c) {
                const e = c.kpis.produtividade;
                const cult = this.mediaGeral(c);
                if (e >= 80 && cult >= 4) return 'Desenvolver';
                if (e >= 80 && cult < 4) return 'Alerta';
                if (e < 80 && cult >= 4) return 'Treinar';
                return 'Desligar';
            }

            corMatriz(tipo) {
                const cores = {
                    'Desenvolver': 'bg-green-100 border-green-500 text-green-800',
                    'Alerta': 'bg-yellow-100 border-yellow-500 text-yellow-800',
                    'Treinar': 'bg-blue-100 border-blue-500 text-blue-800',
                    'Desligar': 'bg-red-100 border-red-500 text-red-800'
                };
                return cores[tipo] || 'bg-gray-100';
            }

            progresso() {
                const total = this.colaboradores.reduce((s, c) => s + (c.metas.mensuravel || 0), 0);
                const perc = (total / this.metaMensal) * 100;
                return { total, perc: perc.toFixed(1), falta: this.metaMensal - total };
            }

            // ============= PERSIST√äNCIA =============

            salvar() {
                localStorage.setItem('squad_colabs', JSON.stringify(this.colaboradores));
                localStorage.setItem('squad_meta', this.metaMensal);
            }

            carregar() {
                const c = localStorage.getItem('squad_colabs');
                if (c) this.colaboradores = JSON.parse(c);
                const m = localStorage.getItem('squad_meta');
                if (m) this.metaMensal = parseFloat(m);
            }

            // ============= RENDERIZA√á√ÉO =============
render() {
  console.log("RENDER START");

                this.carregar();
                const app = document.getElementById('app');

                if (this.pagina === 'home') app.innerHTML = this.renderHome();
                else if (this.pagina === 'colaboradores') app.innerHTML = this.renderColaboradores();
                else if (this.pagina === 'editar') app.innerHTML = this.renderEditar();
                else if (this.pagina === 'dashboard') app.innerHTML = this.renderDashboard();
                else if (this.pagina === 'config') app.innerHTML = this.renderConfig();
            }

            renderHome() {
                const p = this.progresso();
                
                return `
                    <div class="min-h-screen bg-gradient-to-br from-gray-50 to-orange-50">
                        <div class="bg-gradient-to-r from-orange-600 to-orange-800 text-white shadow-xl">
                            <div class="max-w-7xl mx-auto px-4 py-8">
                                <h1 class="text-4xl font-bold">üéØ Sistema de Avalia√ß√£o de Desempenho</h1>
                                <p class="text-lg mt-2">Ferramenta Completa com Guias Educativos para L√≠deres</p>
                            </div>
                        </div>

                        <div class="bg-white shadow border-b">
                            <div class="max-w-7xl mx-auto flex gap-3 px-4 py-3 overflow-x-auto">
                                <button onclick="app.pagina='home'; app.render()" class="px-6 py-3 rounded-lg font-bold bg-orange-500 text-white">üè† In√≠cio</button>
                                <button onclick="app.pagina='colaboradores'; app.render()" class="px-6 py-3 rounded-lg font-semibold bg-gray-200">üë• Colaboradores</button>
                                <button onclick="app.pagina='dashboard'; app.render()" class="px-6 py-3 rounded-lg font-semibold bg-gray-200">üìä Dashboard</button>
                                <button onclick="app.pagina='config'; app.render()" class="px-6 py-3 rounded-lg font-semibold bg-gray-200">‚öôÔ∏è Config</button>
                            </div>
                        </div>

                        <div class="max-w-7xl mx-auto px-4 py-8">
                            <!-- Alerta Educativo -->
                            <div class="bg-gradient-to-r from-blue-500 to-blue-700 text-white rounded-2xl shadow-xl p-6 mb-8">
                                <div class="flex items-center gap-4">
                                    <div class="text-6xl">üìö</div>
                                    <div class="flex-1">
                                        <h2 class="text-2xl font-bold mb-2">Novo L√≠der? Comece pelos Guias!</h2>
                                        <p class="text-lg mb-3">Cada ferramenta tem um guia completo com exemplos pr√°ticos e din√¢micas de grupo</p>
                                        <p class="text-sm">üëá Clique no bot√£o "?" em cada ferramenta abaixo para ver o guia</p>
                                    </div>
                                </div>
                            </div>

                            <!-- Meta -->
                            <div class="bg-gradient-to-r from-green-500 to-green-700 text-white rounded-xl shadow-lg p-6 mb-8">
                                <div class="flex justify-between items-center mb-4">
                                    <div>
                                        <h2 class="text-2xl font-bold">üéØ Meta do M√™s</h2>
                                        <p class="text-xl">R$ \${this.metaMensal.toLocaleString('pt-BR')}</p>
                                    </div>
                                    <div class="text-right">
                                        <div class="text-4xl font-bold">\${p.perc}%</div>
                                        <div>\${this.colaboradores.length} consultores</div>
                                    </div>
                                </div>
                                <div class="w-full bg-white/30 rounded-full h-6">
                                    <div class="bg-white h-6 rounded-full flex items-center justify-center text-green-700 font-bold" 
                                         style="width: \${Math.min(p.perc, 100)}%">
                                        R$ \${p.total.toLocaleString('pt-BR')}
                                    </div>
                                </div>
                            </div>

                            <!-- 8 Ferramentas -->
                            <h2 class="text-3xl font-bold mb-6" style="color: var(--cor-escura)">üõ†Ô∏è 8 Ferramentas de Avalia√ß√£o</h2>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                                \${this.render8Cards()}
                            </div>

                            <!-- CTA -->
                            <div class="text-center bg-white rounded-xl shadow-lg p-8">
                                <h3 class="text-2xl font-bold mb-4">Pronto para come√ßar?</h3>
                                <button onclick="app.adicionar()" 
                                        class="bg-gradient-to-r from-orange-500 to-orange-700 text-white px-10 py-4 rounded-lg font-bold text-lg shadow-lg hover:shadow-xl transition">
                                    ‚ûï Adicionar Primeiro Colaborador
                                </button>
                            </div>
                        </div>
                    </div>
               `;
            }

            render8Cards() {
                const tools = [
                    { num: 1, nome: 'KPIs', icon: 'üìä', desc: 'Indicadores de Desempenho', chave: 'kpis' },
                    { num: 2, nome: 'SMART', icon: 'üéØ', desc: 'Metas Inteligentes', chave: 'smart' },
                    { num: 3, nome: 'CHA', icon: 'üß†', desc: 'Conhecimento, Habilidade, Atitude', chave: 'cha' },
                    { num: 4, nome: 'Compet√™ncias', icon: '‚≠ê', desc: 'Escala 1-5', chave: 'competencias' },
                    { num: 5, nome: 'Feedback', icon: 'üí¨', desc: 'Estruturado em 4 Etapas', chave: 'feedback' },
                    { num: 6, nome: '360¬∞', icon: 'üîÑ', desc: 'Avalia√ß√£o Completa', chave: 'avaliacao360' },
                    { num: 7, nome: 'Matriz', icon: 'üìä', desc: 'Desempenho x Comportamento', chave: 'matriz' },
                    { num: 8, nome: 'PDI', icon: 'üìà', desc: 'Plano de Desenvolvimento', chave: 'pdi' }
                ];

                return tools.map(t => `
                    <div class="card-tool bg-white rounded-xl shadow-lg p-6 border-t-4 border-orange-500 relative">
                        <div class="absolute top-4 right-4">
                            <span onclick="app.abrirGuia('\${t.chave}')" class="badge-help">?</span>
                        </div>
                        <div class="flex items-center gap-3 mb-3">
                            <div class="w-12 h-12 bg-gradient-to-br from-orange-500 to-orange-700 rounded-full flex items-center justify-center text-white font-bold text-xl">\${t.num}</div>
                            <div>
                                <h3 class="text-lg font-bold">\${t.nome}</h3>
                                <div class="text-2xl">\${t.icon}</div>
                            </div>
                        </div>
                        <p class="text-sm text-gray-600 mb-4">\${t.desc}</p>
                        <button onclick="app.abrirGuia('\${t.chave}')" 
                                class="w-full bg-orange-50 hover:bg-orange-100 text-orange-700 py-2 rounded font-semibold text-sm">
                            üìö Ver Guia Completo
                        </button>
                    </div>
                `).join('');
            }

            renderColaboradores() {
                return `
                    <div class="min-h-screen bg-gray-50">
                        <div class="bg-gradient-to-r from-orange-600 to-orange-800 text-white shadow-xl">
                            <div class="max-w-7xl mx-auto px-4 py-6">
                                <h1 class="text-3xl font-bold">üë• Gest√£o de Colaboradores</h1>
                            </div>
                        </div>

                        <div class="bg-white shadow border-b">
                            <div class="max-w-7xl mx-auto flex gap-3 px-4 py-3 overflow-x-auto">
                                <button onclick="app.pagina='home'; app.render()" class="px-4 py-2 rounded-lg font-semibold bg-gray-200">üè† In√≠cio</button>
                                <button onclick="app.pagina='colaboradores'; app.render()" class="px-4 py-2 rounded-lg font-bold bg-orange-500 text-white">üë• Colaboradores</button>
                                <button onclick="app.pagina='dashboard'; app.render()" class="px-4 py-2 rounded-lg font-semibold bg-gray-200">üìä Dashboard</button>
                                <button onclick="app.pagina='config'; app.render()" class="px-4 py-2 rounded-lg font-semibold bg-gray-200">‚öôÔ∏è Config</button>
                            </div>
                        </div>

                        <div class="max-w-7xl mx-auto px-4 py-8">
                            <div class="flex justify-between items-center mb-6">
                                <h2 class="text-2xl font-bold">Lista (\${this.colaboradores.length})</h2>
                                <button onclick="app.adicionar()" class="bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-bold">
                                    ‚ûï Novo Colaborador
                                </button>
                            </div>

                            \${this.colaboradores.length === 0 ? `
                                <div class="bg-yellow-50 border-l-4 border-yellow-400 p-6 rounded-lg">
                                    <h3 class="text-lg font-bold text-yellow-800 mb-2">Nenhum colaborador cadastrado</h3>
                                    <p>Clique em "Novo Colaborador" para come√ßar!</p>
                                </div>
                            ` : `
                                <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                                    \${this.colaboradores.map(c => {
                                        const media = this.mediaGeral(c);
                                        const classe = this.classificar(c);
                                        const cor = this.corMatriz(classe);
                                        
                                        return `
                                            <div class="bg-white rounded-xl shadow-lg overflow-hidden border-t-4 border-orange-500">
                                                <div class="p-6">
                                                    <div class="flex justify-between items-start mb-4">
                                                        <div>
                                                            <h3 class="text-xl font-bold">\${c.nome}</h3>
                                                            <p class="text-gray-600 text-sm">\${c.cargo}</p>
                                                        </div>
                                                        <div class="text-right">
                                                            <div class="text-3xl font-bold text-orange-500">\${media}</div>
                                                            <div class="text-xs text-gray-500">M√©dia</div>
                                                        </div>
                                                    </div>

                                                    <div class="mb-4">
                                                        <div class="px-4 py-2 rounded-lg text-center font-bold \${cor}">
                                                            \${classe}
                                                        </div>
                                                    </div>

                                                    <div class="grid grid-cols-3 gap-2 mb-4 text-center text-xs">
                                                        <div>
                                                            <div class="font-bold text-lg">\${c.kpis.produtividade}%</div>
                                                            <div class="text-gray-600">Produt.</div>
                                                        </div>
                                                        <div>
                                                            <div class="font-bold text-lg">\${c.cha.atitude}/5</div>
                                                            <div class="text-gray-600">Atitude</div>
                                                        </div>
                                                        <div>
                                                            <div class="font-bold text-lg">R$ \${(c.metas.mensuravel||0).toLocaleString('pt-BR', {maximumFractionDigits:0})}</div>
                                                            <div class="text-gray-600">Meta</div>
                                                        </div>
                                                    </div>

                                                    <div class="flex gap-2">
                                                        <button onclick="app.editar(\${c.id})" class="flex-1 bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg font-semibold text-sm">
                                                            ‚úèÔ∏è Avaliar
                                                        </button>
                                                        <button onclick="app.excluir(\${c.id})" class="bg-red-500 hover:bg-red-600 text-white px-4 py-2 rounded-lg font-semibold text-sm">
                                                            üóëÔ∏è
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            `}
                        </div>
                    </div>
                `;
            }

            renderEditar() {
                const c = this.editando;
                if (!c) return '';

                return `
                    <div class="min-h-screen bg-gray-50">
                        <div class="bg-gradient-to-r from-orange-600 to-orange-800 text-white shadow-xl">
                            <div class="max-w-7xl mx-auto px-4 py-6">
                                <h1 class="text-3xl font-bold">‚úèÔ∏è Avaliando: \${c.nome}</h1>
                                <p class="mt-2">Preencha cada se√ß√£o com aten√ß√£o. Use os guias (?) para orienta√ß√£o.</p>
                            </div>
                        </div>

                        <div class="max-w-5xl mx-auto px-4 py-8">
                            <div class="bg-white rounded-xl shadow-xl p-8">
                                \${this.renderFormAvaliacao(c)}
                                
                                <div class="flex gap-4 mt-8">
                                    <button onclick="app.salvarEdicao()" 
                                            class="flex-1 bg-green-500 hover:bg-green-600 text-white py-4 rounded-lg font-bold text-lg">
                                        üíæ Salvar Avalia√ß√£o
                                    </button>
                                    <button onclick="app.pagina='colaboradores'; app.render()" 
                                            class="bg-gray-400 hover:bg-gray-500 text-white px-8 py-4 rounded-lg font-bold">
                                        ‚ùå Cancelar
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
               `;
            }

            renderFormAvaliacao(c) {
                return `
                    <div class="space-y-8">
                        <!-- KPIs -->
                        <div class="border-2 border-orange-500 rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-bold flex items-center gap-2">
                                    <span class="w-8 h-8 bg-orange-500 rounded-full flex items-center justify-center text-white text-sm">1</span>
                                    KPIs - Indicadores
                                </h3>
                                <span onclick="app.abrirGuia('kpis')" class="badge-help">?</span>
                            </div>
                            <div class="grid grid-cols-3 gap-4">
                                <div>
                                    <label class="block font-semibold mb-2">Entregas (%)</label>
                                    <input type="number" value="\${c.kpis.entregas}" 
                                           onchange="app.editando.kpis.entregas = parseFloat(this.value)" 
                                           class="w-full px-4 py-2 border-2 rounded-lg" min="0" max="100">
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">Produtividade (%)</label>
                                    <input type="number" value="\${c.kpis.produtividade}" 
                                           onchange="app.editando.kpis.produtividade = parseFloat(this.value)" 
                                           class="w-full px-4 py-2 border-2 rounded-lg" min="0" max="100">
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">Erros (%)</label>
                                    <input type="number" value="\${c.kpis.erros}" 
                                           onchange="app.editando.kpis.erros = parseFloat(this.value)" 
                                           class="w-full px-4 py-2 border-2 rounded-lg" min="0" max="100">
                                </div>
                            </div>
                        </div>

                        <!-- SMART -->
                        <div class="border-2 border-blue-500 rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-bold flex items-center gap-2">
                                    <span class="w-8 h-8 bg-blue-500 rounded-full flex items-center justify-center text-white text-sm">2</span>
                                    Metas SMART
                                </h3>
                                <span onclick="app.abrirGuia('smart')" class="badge-help">?</span>
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <label class="block font-semibold mb-2">Espec√≠fica</label>
                                    <input type="text" value="\${c.metas.especifica}" 
                                           onchange="app.editando.metas.especifica = this.value" 
                                           class="w-full px-4 py-2 border-2 rounded-lg" 
                                           placeholder="Ex: Vender 100k em software">
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">Mensur√°vel (R$)</label>
                                    <input type="number" value="\${c.metas.mensuravel}" 
                                           onchange="app.editando.metas.mensuravel = parseFloat(this.value)" 
                                           class="w-full px-4 py-2 border-2 rounded-lg" placeholder="100000">
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">Ating√≠vel</label>
                                    <input type="text" value="\${c.metas.atingivel}" 
                                           onchange="app.editando.metas.atingivel = this.value" 
                                           class="w-full px-4 py-2 border-2 rounded-lg" 
                                           placeholder="Com 20 reuni√µes/semana">
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">Relevante</label>
                                    <input type="text" value="\${c.metas.relevante}" 
                                           onchange="app.editando.metas.relevante = this.value" 
                                           class="w-full px-4 py-2 border-2 rounded-lg" 
                                           placeholder="Contribui para meta do time">
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">Temporal</label>
                                    <input type="text" value="\${c.metas.temporal}" 
                                           onchange="app.editando.metas.temporal = this.value" 
                                           class="w-full px-4 py-2 border-2 rounded-lg" 
                                           placeholder="At√© 28/02/2026">
                                </div>
                            </div>
                        </div>

                        <!-- CHA -->
                        <div class="border-2 border-purple-500 rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-bold flex items-center gap-2">
                                    <span class="w-8 h-8 bg-purple-500 rounded-full flex items-center justify-center text-white text-sm">3</span>
                                    CHA
                                </h3>
                                <span onclick="app.abrirGuia('cha')" class="badge-help">?</span>
                            </div>
                            <div class="space-y-4">
                                \${this.renderEscala('Conhecimento (sabe?)', c.cha.conhecimento, 'cha.conhecimento')}
                                \${this.renderEscala('Habilidade (consegue?)', c.cha.habilidade, 'cha.habilidade')}
                                \${this.renderEscala('Atitude (quer?)', c.cha.atitude, 'cha.atitude')}
                            </div>
                        </div>

                        <!-- Compet√™ncias -->
                        <div class="border-2 border-green-500 rounded-lg p-6">
                            <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                                <span class="w-8 h-8 bg-green-500 rounded-full flex items-center justify-center text-white text-sm">4</span>
                                Compet√™ncias
                            </h3>
                            <div class="space-y-4">
                                \${this.renderEscala('Responsabilidade', c.competencias.responsabilidade, 'competencias.responsabilidade')}
                                \${this.renderEscala('Comunica√ß√£o', c.competencias.comunicacao, 'competencias.comunicacao')}
                                \${this.renderEscala('Organiza√ß√£o', c.competencias.organizacao, 'competencias.organizacao')}
                                \${this.renderEscala('Proatividade', c.competencias.proatividade, 'competencias.proatividade')}
                                \${this.renderEscala('Trabalho em Equipe', c.competencias.trabalhoEquipe, 'competencias.trabalhoEquipe')}
                                \${this.renderEscala('Lideran√ßa', c.competencias.lideranca, 'competencias.lideranca')}
                            </div>
                        </div>

                        <!-- Feedback -->
                        <div class="border-2 border-yellow-500 rounded-lg p-6">
                            <div class="flex items-center justify-between mb-4">
                                <h3 class="text-xl font-bold flex items-center gap-2">
                                    <span class="w-8 h-8 bg-yellow-500 rounded-full flex items-center justify-center text-white text-sm">5</span>
                                    Feedback Estruturado
                                </h3>
                                <span onclick="app.abrirGuia('feedback')" class="badge-help">?</span>
                            </div>
                            <div class="space-y-4">
                                <div>
                                    <label class="block font-semibold mb-2">1. Funcionando</label>
                                    <textarea onchange="app.editando.feedback.funcionando = this.value" 
                                              class="w-full px-4 py-2 border-2 rounded-lg" rows="2">\${c.feedback.funcionando}</textarea>
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">2. Melhorar</label>
                                    <textarea onchange="app.editando.feedback.melhorar = this.value" 
                                              class="w-full px-4 py-2 border-2 rounded-lg" rows="2">\${c.feedback.melhorar}</textarea>
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">3. Impacto</label>
                                    <textarea onchange="app.editando.feedback.impacto = this.value" 
                                              class="w-full px-4 py-2 border-2 rounded-lg" rows="2">\${c.feedback.impacto}</textarea>
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">4. Ajuste</label>
                                    <textarea onchange="app.editando.feedback.ajuste = this.value" 
                                              class="w-full px-4 py-2 border-2 rounded-lg" rows="2">\${c.feedback.ajuste}</textarea>
                                </div>
                            </div>
                        </div>

                        <!-- 360 -->
                        <div class="border-2 border-indigo-500 rounded-lg p-6">
                            <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                                <span class="w-8 h-8 bg-indigo-500 rounded-full flex items-center justify-center text-white text-sm">6</span>
                                Avalia√ß√£o 360¬∞
                            </h3>
                            <div class="space-y-4">
                                \${this.renderEscala('Autoavalia√ß√£o', c.avaliacao360.autoavaliacao, 'avaliacao360.autoavaliacao')}
                                \${this.renderEscala('L√≠der', c.avaliacao360.lider, 'avaliacao360.lider')}
                                \${this.renderEscala('Pares', c.avaliacao360.pares, 'avaliacao360.pares')}
                                \${this.renderEscala('Subordinados', c.avaliacao360.subordinados, 'avaliacao360.subordinados')}
                            </div>
                        </div>

                        <!-- PDI -->
                        <div class="border-2 border-pink-500 rounded-lg p-6">
                            <h3 class="text-xl font-bold mb-4 flex items-center gap-2">
                                <span class="w-8 h-8 bg-pink-500 rounded-full flex items-center justify-center text-white text-sm">8</span>
                                PDI
                            </h3>
                            <div class="space-y-4">
                                <div>
                                    <label class="block font-semibold mb-2">Ponto Forte</label>
                                    <input type="text" value="\${c.pdi.pontoForte}" 
                                           onchange="app.editando.pdi.pontoForte = this.value" 
                                           class="w-full px-4 py-2 border-2 rounded-lg">
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">Ponto de Melhoria</label>
                                    <input type="text" value="\${c.pdi.pontoMelhoria}" 
                                           onchange="app.editando.pdi.pontoMelhoria = this.value" 
                                           class="w-full px-4 py-2 border-2 rounded-lg">
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">A√ß√£o Pr√°tica</label>
                                    <input type="text" value="\${c.pdi.acaoPratica}" 
                                           onchange="app.editando.pdi.acaoPratica = this.value" 
                                           class="w-full px-4 py-2 border-2 rounded-lg">
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">Prazo</label>
                                    <input type="text" value="\${c.pdi.prazo}" 
                                           onchange="app.editando.pdi.prazo = this.value" 
                                           class="w-full px-4 py-2 border-2 rounded-lg">
                                </div>
                                <div>
                                    <label class="block font-semibold mb-2">Respons√°vel</label>
                                    <input type="text" value="\${c.pdi.responsavel}" 
                                           onchange="app.editando.pdi.responsavel = this.value" 
                                           class="w-full px-4 py-2 border-2 rounded-lg">
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }

            renderEscala(label, valor, caminho) {
                return `
                    <div>
                        <div class="flex justify-between items-center mb-2">
                            <label class="font-semibold">\${label}</label>
                            <span class="text-2xl font-bold text-orange-500">\${valor}/5</span>
                        </div>
                        <div class="flex gap-2">
                            \${[1,2,3,4,5].map(i => `
                                <button onclick="app.editando.\${caminho} = \${i}; app.render()" 
                                        class="flex-1 py-3 rounded-lg font-bold \${i <= valor ? 'bg-orange-500 text-white' : 'bg-gray-200 text-gray-600'}">
                                    \${i}
                                </button>
                            `).join('')}
                        </div>
                    </div>
               `;
            }

            renderDashboard() {
                const p = this.progresso();
                
                return `
                    <div class="min-h-screen bg-gray-50">
                        <div class="bg-gradient-to-r from-orange-600 to-orange-800 text-white shadow-xl">
                            <div class="max-w-7xl mx-auto px-4 py-6">
                                <h1 class="text-3xl font-bold">üìä Dashboard Geral</h1>
                            </div>
                        </div>

                        <div class="bg-white shadow border-b">
                            <div class="max-w-7xl mx-auto flex gap-3 px-4 py-3 overflow-x-auto">
                                <button onclick="app.pagina='home'; app.render()" class="px-4 py-2 rounded-lg font-semibold bg-gray-200">üè† In√≠cio</button>
                                <button onclick="app.pagina='colaboradores'; app.render()" class="px-4 py-2 rounded-lg font-semibold bg-gray-200">üë• Colaboradores</button>
                                <button onclick="app.pagina='dashboard'; app.render()" class="px-4 py-2 rounded-lg font-bold bg-orange-500 text-white">üìä Dashboard</button>
                                <button onclick="app.pagina='config'; app.render()" class="px-4 py-2 rounded-lg font-semibold bg-gray-200">‚öôÔ∏è Config</button>
                            </div>
                        </div>

                        <div class="max-w-7xl mx-auto px-4 py-8">
                            <!-- M√©tricas -->
                            <div class="grid grid-cols-4 gap-6 mb-8">
                                <div class="bg-white rounded-xl shadow-lg p-6 border-t-4 border-blue-500">
                                    <div class="text-gray-600 mb-2">Colaboradores</div>
                                    <div class="text-4xl font-bold text-blue-600">\${this.colaboradores.length}</div>
                                </div>
                                <div class="bg-white rounded-xl shadow-lg p-6 border-t-4 border-green-500">
                                    <div class="text-gray-600 mb-2">Meta Mensal</div>
                                    <div class="text-2xl font-bold text-green-600">R$ \${this.metaMensal.toLocaleString('pt-BR')}</div>
                                </div>
                                <div class="bg-white rounded-xl shadow-lg p-6 border-t-4 border-orange-500">
                                    <div class="text-gray-600 mb-2">Alcan√ßado</div>
                                    <div class="text-2xl font-bold text-orange-600">R$ \${p.total.toLocaleString('pt-BR')}</div>
                                </div>
                                <div class="bg-white rounded-xl shadow-lg p-6 border-t-4 border-purple-500">
                                    <div class="text-gray-600 mb-2">% da Meta</div>
                                    <div class="text-4xl font-bold text-purple-600">\${p.perc}%</div>
                                </div>
                            </div>

                            <!-- Matriz -->
                            <div class="bg-white rounded-xl shadow-lg p-8 mb-8">
                                <div class="flex items-center justify-between mb-6">
                                    <h2 class="text-2xl font-bold">üìä Matriz: Desempenho x Comportamento</h2>
                                    <span onclick="app.abrirGuia('matriz')" class="badge-help">?</span>
                                </div>
                                
                                <div class="grid grid-cols-2 gap-4">
                                    \${['Desenvolver', 'Alerta', 'Treinar', 'Desligar'].map(tipo => {
                                        const colabs = this.colaboradores.filter(c => this.classificar(c) === tipo);
                                        const cor = this.corMatriz(tipo);
                                        return `
                                            <div class="border-2 \${cor} rounded-lg p-4 min-h-[150px]">
                                                <h3 class="font-bold text-lg mb-2">\${tipo}</h3>
                                                <div class="text-3xl font-bold mb-2">\${colabs.length}</div>
                                                <div class="text-sm space-y-1">
                                                    \${colabs.map(c => \`<div>‚Ä¢ \${c.nome}</div>\`).join('') || '<div class="text-gray-400">Nenhum</div>'}
                                                </div>
                                            </div>
                                        `;
                                    }).join('')}
                                </div>
                            </div>

                            <!-- Ranking -->
                            <div class="bg-white rounded-xl shadow-lg p-8">
                                <h2 class="text-2xl font-bold mb-6">üèÜ Ranking de Desempenho</h2>
                                
                                \${this.colaboradores.length === 0 ? `
                                    <p class="text-gray-500 text-center py-8">Nenhum colaborador cadastrado</p>
                                ` : `
                                    <div class="space-y-3">
                                        \${this.colaboradores
                                            .map(c => ({ ...c, media: parseFloat(this.mediaGeral(c)) }))
                                            .sort((a, b) => b.media - a.media)
                                            .map((c, i) => `
                                                <div class="flex items-center gap-4 p-4 rounded-lg \${i === 0 ? 'bg-yellow-50 border-2 border-yellow-400' : 'bg-gray-50'}">
                                                    <div class="w-12 h-12 rounded-full \${i === 0 ? 'bg-yellow-400' : i === 1 ? 'bg-gray-300' : i === 2 ? 'bg-orange-300' : 'bg-gray-200'} flex items-center justify-center font-bold text-lg">
                                                        \${i + 1}
                                                    </div>
                                                    <div class="flex-1">
                                                        <div class="font-bold text-lg">\${c.nome}</div>
                                                        <div class="text-sm text-gray-600">\${this.classificar(c)}</div>
                                                    </div>
                                                    <div class="text-right">
                                                        <div class="text-2xl font-bold text-orange-500">\${c.media}</div>
                                                        <div class="text-xs text-gray-500">M√©dia Geral</div>
                                                    </div>
                                                </div>
                                            `).join('')}
                                    </div>
                                `}
                            </div>
                        </div>
                    </div>
                `;
            }

            renderConfig() {
                return `
                    <div class="min-h-screen bg-gray-50">
                        <div class="bg-gradient-to-r from-orange-600 to-orange-800 text-white shadow-xl">
                            <div class="max-w-7xl mx-auto px-4 py-6">
                                <h1 class="text-3xl font-bold">‚öôÔ∏è Configura√ß√µes</h1>
                            </div>
                        </div>

                        <div class="bg-white shadow border-b">
                            <div class="max-w-7xl mx-auto flex gap-3 px-4 py-3 overflow-x-auto">
                                <button onclick="app.pagina='home'; app.render()" class="px-4 py-2 rounded-lg font-semibold bg-gray-200">üè† In√≠cio</button>
                                <button onclick="app.pagina='colaboradores'; app.render()" class="px-4 py-2 rounded-lg font-semibold bg-gray-200">üë• Colaboradores</button>
                                <button onclick="app.pagina='dashboard'; app.render()" class="px-4 py-2 rounded-lg font-semibold bg-gray-200">üìä Dashboard</button>
                                <button onclick="app.pagina='config'; app.render()" class="px-4 py-2 rounded-lg font-bold bg-orange-500 text-white">‚öôÔ∏è Config</button>
                            </div>
                        </div>

                        <div class="max-w-4xl mx-auto px-4 py-8">
                            <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
                                <h2 class="text-2xl font-bold mb-6">Meta Mensal</h2>
                                
                                <div class="mb-6">
                                    <label class="block font-semibold mb-2">üí∞ Meta de Vendas (R$)</label>
                                    <input type="number" id="inputMeta" value="\${this.metaMensal}" 
                                           class="w-full px-4 py-3 border-2 rounded-lg text-xl font-bold">
                                </div>

                                <button onclick="app.atualizarMeta()" 
                                        class="bg-orange-500 hover:bg-orange-600 text-white px-8 py-3 rounded-lg font-bold w-full">
                                    üíæ Salvar Meta
                                </button>
                            </div>

                            <div class="bg-white rounded-xl shadow-lg p-8 mb-6">
                                <h2 class="text-2xl font-bold mb-4">Dados do Sistema</h2>
                                
                                <div class="space-y-4">
                                    <div class="p-4 bg-gray-50 rounded-lg">
                                        <div class="font-bold">Colaboradores Cadastrados</div>
                                        <div class="text-gray-600">\${this.colaboradores.length} registros</div>
                                    </div>

                                    <button onclick="app.exportar()" 
                                            class="w-full bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-lg font-bold">
                                        üì• Exportar Dados (JSON)
                                    </button>

                                    <button onclick="app.limpar()" 
                                            class="w-full bg-red-500 hover:bg-red-600 text-white px-6 py-3 rounded-lg font-bold">
                                        üóëÔ∏è Limpar Todos os Dados
                                    </button>
                                </div>
                            </div>

                            <div class="bg-blue-50 border-l-4 border-blue-400 p-6 rounded-lg">
                                <h3 class="text-lg font-bold text-blue-800 mb-2">üí° Sobre o Sistema</h3>
                                <p class="text-gray-700">
                                    Sistema completo de avalia√ß√£o baseado nas 8 Ferramentas fundamentais.
                                    Inclui guias educativos para l√≠deres e din√¢micas de grupo.
                                    Dados armazenados localmente no navegador.
                                </p>
                            </div>
                        </div>
                    </div>
                `;
            }

            // ============= FUN√á√ïES AUXILIARES =============

            atualizarMeta() {
                const v = parseFloat(document.getElementById('inputMeta').value);
                if (v > 0) {
                    this.metaMensal = v;
                    this.salvar();
                    alert('‚úÖ Meta atualizada!');
                    this.render();
                } else {
                    alert('‚ùå Digite um valor v√°lido!');
                }
            }

            exportar() {
                const dados = {
                    meta: this.metaMensal,
                    colaboradores: this.colaboradores,
                    data: new Date().toISOString()
                };
                
                const blob = new Blob([JSON.stringify(dados, null, 2)], { type: 'application/json' });
                const url = URL.createObjectURL(blob);
                const a = document.createElement('a');
                a.href = url;
                a.download = `squad-\${new Date().toISOString().split('T')[0]}.json`;
                a.click();
                
                alert('‚úÖ Dados exportados!');
            }

            limpar() {
                if (confirm('‚ö†Ô∏è Apagar TODOS os dados?')) {
                    if (confirm('Confirma a exclus√£o?')) {
                        localStorage.clear();
                        this.colaboradores = [];
                        this.metaMensal = 450000;
                        alert('‚úÖ Dados apagados!');
                        this.pagina = 'home';
                        this.render();
                    }
                }
            }
        }

        // ============= INICIALIZA√á√ÉO =============
        const app = new SistemaAvaliacao();
        
        // Fechar modal ao clicar fora
        document.getElementById('modalGuia').onclick = (e) => {
            if (e.target.id === 'modalGuia') {
                e.target.style.display = 'none';
            }
        };
    </script>
</body>
</html>
